# 项目初始化对话 - 完整流程

当用户说以下关键词时启动此流程：
- "帮我初始化一个新项目"
- "创建新项目"
- "初始化项目"
- "新建项目"

---

## 📋 对话流程

### 第一步：启动对话，收集基本信息

```
我来帮你初始化新项目！请告诉我以下信息：

【基本信息】
1. 项目叫什么名字？
2. 这个项目是做什么的？（一句话描述）
3. 目标用户是谁？
```

**等待用户回答...**

---

### 第二步：收集功能需求

```
好的，了解了基本信息。现在请描述功能需求：

【核心功能】
这个项目有哪些核心功能？请逐一列出。

【不包含的功能】（可选）
- 有哪些明确不想做的功能？
- 有哪些可以留到后续版本？
```

**等待用户回答...**

**如果信息太简略，追问：**
```
你的功能描述比较简略，为了更好地生成任务列表，我需要更多细节：

请为每个核心功能说明：
- 功能的具体作用
- 需要哪些输入
- 期望什么输出

例如：
❌ 用户管理
✅ 用户管理 - 包括用户注册、登录、查看个人资料、修改密码
```

---

### 第三步：确认技术选型

```
了解功能后，我需要确认技术栈：

【前端】
- 使用什么框架？（React/Vue/Next.js/Nuxt.js/原生HTML）
- 需要 UI 组件库吗？（Ant Design/Material-UI/Tailwind CSS/无需）
- 需要状态管理吗？（Redux/Zustand/Pinia/无需）

【后端】（如果需要）
- 需要后端 API 吗？
- 使用什么框架？（Express/FastAPI/Go/无需）

【数据库】（如果需要）
- 需要数据库吗？
- 使用什么数据库？（PostgreSQL/MySQL/SQLite/MongoDB/无需）

【其他】
- 需要用户认证吗？
- 需要接入第三方 API 吗？
```

**等待用户回答...**

---

### 第四步：信息确认与理解复述

```
【信息确认】

我已收集到以下信息：

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

【项目概览】
• 项目名称：[名称]
• 项目描述：[描述]
• 目标用户：[用户]

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

【核心功能】
1. [功能1] - [简短说明]
2. [功能2] - [简短说明]
3. [功能3] - [简短说明]

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

【技术栈】
• 前端：[框架] + [UI库] + [状态管理]
• 后端：[框架]
• 数据库：[数据库]
• 其他：[其他]

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

【我的理解】

这个项目是一个 [项目类型] 系统，主要服务于 [目标用户]。

核心流程是：
1. 用户 → [操作1] → [结果1]
2. 用户 → [操作2] → [结果2]

技术架构采用 [架构模式]，前端使用 [前端技术]，后端使用 [后端技术]。

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

【我将生成的文件】
✅ PRD.md - 产品需求文档
✅ architecture.md - 架构设计文档
✅ task.json - 任务列表（预计约 X 个任务）
✅ CLAUDE.md - Agent 工作流程
✅ rules.md - 编码规范
✅ testing.md - 测试规则
✅ init.sh - 初始化脚本
✅ .env.example - 环境变量模板

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

请确认：
1. 以上信息是否正确？
2. 我的理解是否准确？
3. 是否有需要补充或修改的地方？

回复 "确认" 开始生成文件，或告诉我需要调整的地方。
```

---

### 第五步：等待确认并生成

**用户回复 "确认" 后：**

```
收到！开始生成约束文件...

[生成过程]
✅ 已生成 PRD.md
✅ 已生成 architecture.md
✅ 已生成 task.json (包含 X 个任务)
✅ 已生成 CLAUDE.md
✅ 已生成 rules.md
✅ 已生成 testing.md
✅ 已生成 init.sh
✅ 已生成 .env.example

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

✅ 约束文件生成完成！

【下一步】

1. 请检查生成的文件是否符合你的需求
   - cat PRD.md           # 查看产品需求
   - cat architecture.md  # 查看架构设计
   - cat task.json        # 查看任务列表

2. 如需修改，请直接编辑文件
   - vim PRD.md
   - vim task.json

3. 准备好后，运行以下命令初始化环境：
   - chmod +x init.sh
   - ./init.sh

4. 然后运行 claude -p 开始自动开发

需要我解释任何文件的内容吗？
```

---

## 🔍 信息不足时的追问模板

### 功能信息不足

```
【功能信息需要补充】

你提供的信息比较简略，为了更准确地生成任务列表，我需要更多细节：

【功能：xxx】
请说明：
- 这个功能的具体作用是什么？
- 用户如何使用这个功能？
- 需要哪些输入？
- 期望得到什么输出？
- 有什么特殊要求或约束？

请逐个功能补充描述。
```

### 技术栈信息不足

```
【技术栈信息需要补充】

你选择的技术栈信息不够完整，请补充：

【前端】
- 使用什么版本的框架？
- 是否需要 TypeScript？
- 是否需要 CSS 预处理器？

【后端】（如果需要）
- 使用什么语言版本？
- 需要 API 文档工具吗？
- 需要 CORS 配置吗？

请补充完整的技术栈信息，这样我可以：
1. 生成更准确的 task.json
2. 生成合适的 rules.md
3. 配置合适的 init.sh
```

---

## 📝 确认理解模板

### 复述理解的结构

```
【我的理解】

根据你提供的信息，我理解这个项目是：

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

【项目定位】
这是一个 [项目类型]，主要解决 [用户痛点]。

【核心功能】
核心功能是 [功能概述]，具体包括：
1. [功能1] - 用于 [使用场景]
2. [功能2] - 用于 [使用场景]
3. [功能3] - 用于 [使用场景]

【用户流程】
主要使用流程是：
用户 → [入口] → [操作] → [结果]

【技术实现】
- 前端使用 [前端技术]，负责 [前端职责]
- 后端使用 [后端技术]，负责 [后端职责]
- 数据使用 [数据库] 存储

【约束条件】
- 必须满足：[约束1]
- 不能做：[约束2]

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

这样理解对吗？有需要纠正或补充的地方吗？
```

---

## ⚠️ 注意事项

1. **不要假设** — 如果用户没有提供的信息，必须询问，不能自己编造
2. **分步收集** — 一次问一类问题，不要一次性问太多
3. **确认理解** — 生成前必须复述理解，让用户确认
4. **允许修改** — 告诉用户生成的文件可以随时修改
5. **记录决策** - 对话中记录用户的技术决策，用于生成文档

---

## 💬 对话示例

### 示例 1：信息充足的情况

```
用户: 帮我初始化一个新项目

Agent: 我来帮你初始化新项目！请告诉我以下信息：

【基本信息】
1. 项目叫什么名字？
2. 这个项目是做什么的？
3. 目标用户是谁？

用户:
- 名称：TaskFlow
- 描述：一个任务管理工具，帮助团队协作
- 用户：小团队

Agent: 好的，了解了基本信息。现在请描述功能需求：
...

用户: 核心功能有：
- 任务创建和分配
- 任务进度跟踪
- 团队成员管理

Agent: 了解功能后，我需要确认技术栈：
...

用户:
- 前端：React + Ant Design
- 后端：无，使用 LocalStorage
- 数据库：无

Agent: 【信息确认】
[复述理解...]

请回复 "确认" 开始生成文件。

用户: 确认

Agent: [生成所有文件]
```

### 示例 2：信息不足需要追问的情况

```
用户: 帮我做一个电商项目

Agent: 我来帮你初始化新项目！请告诉我以下信息：

【基本信息】
1. 项目叫什么名字？
2. 这个项目是做什么的？
3. 目标用户是谁？

用户: 电商项目，卖衣服的

Agent: 好的，了解了基本信息。现在请描述功能需求：

【核心功能】
这个项目有哪些核心功能？请逐一列出。

用户: 用户管理、商品管理、购物车、订单

Agent: 【功能信息需要补充】

你提供的信息比较简略，为了更准确地生成任务列表，我需要更多细节：

【功能：用户管理】
请说明：
- 这个功能的具体作用是什么？
- 需要哪些输入？
- 期望什么输出？
- 有什么特殊要求？

【功能：商品管理】
...

请逐个功能补充描述。

用户:
- 用户管理：包括注册、登录、查看订单
- 商品管理：商家可以添加商品、编辑商品、下架商品
- 购物车：用户可以添加商品、修改数量、删除商品
- 订单：用户可以下单、查看订单状态

Agent: 好的，信息更完整了。我需要确认技术栈：
...
```
